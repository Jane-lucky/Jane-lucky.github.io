---
title: k8s对象管理
categories: 
- k8s
tags:
- k8s
---

# 指令式命令管理

`kubectl`采用动词驱动的方式来创建一些常见的对象类型。

`run`:创建一个pod运行容器。

`create`:创建对象——支持JSON和YMAL格式类型。

可以创建不同的对象类型

```shell
Examples:
  # Create a pod using the data in pod.json
  kubectl create -f ./pod.json

  # Create a pod based on the JSON passed into stdin
  cat pod.json | kubectl create -f -

  # Edit the data in registry.yaml in JSON then create the resource using the edited data
  kubectl create -f registry.yaml --edit -o json
```

`delete`:与create的用法相似

```shell
Examples:
  # Delete a pod using the type and name specified in pod.json
  kubectl delete -f ./pod.json

  # Delete resources from a directory containing kustomization.yaml - e.g. dir/kustomization.yaml
  kubectl delete -k dir

  # Delete resources from all files that end with '.json' - i.e. expand wildcard characters in file names
  kubectl delete -f '*.json'

  # Delete a pod based on the type and name in the JSON passed into stdin
  cat pod.json | kubectl delete -f -

  # Delete pods and services with same names "baz" and "foo"
  kubectl delete pod,service baz foo

  # Delete pods and services with label name=myLabel
  kubectl delete pods,services -l name=myLabel

  # Delete a pod with minimal delay
  kubectl delete pod foo --now

  # Force delete a pod on a dead node
  kubectl delete pod foo --force

  # Delete all pods
  kubectl delete pods --all

```

`set`：在创建对象之前修改对象

```shell
kubectl create service clusterip my-svc --clusterip="None" -o yaml --dry-run=client | kubectl set selector --local -f - 'environment=qa' -o yaml | kubectl create -f -
```

`kubectl create service clusterip my-svc --clusterip="None" -o yaml --dry-run=client`:创建service配置，但将其以YAML格式标准输出上打印而不是发送API服务器。

`kubectl set selector --local -f - 'environment=qa' -o yaml`从标准输入读入配置，更新yaml。

`kubectl create -f -`:使用标准输入上获得的配置创建对象

`edit`更改对象

`kubectl create --edit`来在对象创建之前更改配置。